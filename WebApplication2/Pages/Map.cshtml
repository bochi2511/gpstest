@page
@model WebApplication2.Pages.MapModel
@{
    Layout = null;
}

<!DOCTYPE html>
<html>
<head>
    <title>Simple Leaflet Map</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.1/dist/leaflet.css"
          crossorigin="" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet-draw@0.4.2/dist/leaflet.draw.css"/>
    
    <style>
        html, body, #map {
            padding: 0;
            margin: 0;
            height: 100%;
            width: 100%;
        }
    </style>
</head>
<body>
    <div id="map" style="width: 100vw; height: 100vh"></div>
    <script src="https://unpkg.com/leaflet@1.3.1/dist/leaflet.js"
            crossorigin=""></script>
    <script src="https://unpkg.com/leaflet-draw@0.4.2/dist/leaflet.draw.js"></script>

    
    <script>
        var map = L.map('map').setView([-23.0255393, -69.0803490], 13);
        mapLink =
            '<a href="http://www.esri.com/">Esri</a>';
        wholink =
            'i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community';
        esri = L.tileLayer(
            'http://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', {
                attribution: '&copy; ' + mapLink + ', ' + wholink,
                maxZoom: 20,
                maxNativeZoom: 17,
            })

        drawingLayer = L.featureGroup().addTo(map);
        L.control.layers({
            'esri': esri.addTo(map),
            "google": L.tileLayer('http://www.google.cn/maps/vt?lyrs=s@189&gl=cn&x={x}&y={y}&z={z}', {
                attribution: 'google'
            })
        }, {
                'drawlayer': drawingLayer
            }, {
                position: 'topleft',
                collapsed: false
            }).addTo(map);

        map.addControl(new L.Control.Draw({
            position: 'topleft',
            edit: {
                featureGroup: drawingLayer
            },
            draw: {
                polyline: false,
                marker: false,
                polygon: {
                    allowIntersection: true,
                    drawError: {
                        color: '#662d91',
                        timeout: 3000
                    },
                    shapeOptions: {
                        color: '#662d91',
                        weight: 1.5
                    },
                    showArea: true,
                    repeatMode: true,
                    metric: true
                },
                rectangle: {
                    repeatMode: true,
                    metric: true,
                    shapeOptions: {
                        color: '#662d91',
                        weight: 1.5
                    }
                },
                circle: {
                    repeatMode: true,
                    metric: true,
                    shapeOptions: {
                        color: '#662d91',
                        weight: 1.5
                    }
                }
            }
        }));
        map.on('draw:created', function (event) {
            var layer = event.layer;
            drawingLayer.addLayer(layer);
        });
    </script>
</body>
</html>

